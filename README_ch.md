# <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTchGHKMA3VyA1ySh2ITWb0CIm_cnhF1cGvlQ&s" alt="Full Stack Projects" width="52" height="40" />  æ°´æ°”è¡¨è¯»æ•°ç®¡ç† API <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTchGHKMA3VyA1ySh2ITWb0CIm_cnhF1cGvlQ&s" alt="Java Projects Logo" width="52" height="40" />

## ğŸŒ [![PortuguÃªs](https://img.shields.io/badge/PortuguÃªs-green)](https://github.com/SamuelRocha91/apiMeasureWaterAndGas/blob/main/README.md) [![EspaÃ±ol](https://img.shields.io/badge/EspaÃ±ol-yellow)](https://github.com/SamuelRocha91/apiMeasureWaterAndGas/blob/main/README_es.md) [![English](https://img.shields.io/badge/English-blue)](https://github.com/SamuelRocha91/apiMeasureWaterAndGas/blob/main/README_en.md) [![Ğ ÑƒÑÑĞºĞ¸Ğ¹](https://img.shields.io/badge/Ğ ÑƒÑÑĞºĞ¸Ğ¹-lightgrey)](https://github.com/SamuelRocha91/apiMeasureWaterAndGas/blob/main/README_ru.md) [![ä¸­æ–‡](https://img.shields.io/badge/ä¸­æ–‡-red)](https://github.com/SamuelRocha91/apiMeasureWaterAndGas/blob/main/README_ch.md) [![Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©](https://img.shields.io/badge/Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©-orange)](https://github.com/SamuelRocha91/apiMeasureWaterAndGas/blob/main/README_ar.md)

æ­¤ API ç”¨äºç®¡ç†å®¢æˆ·ä¸åŒæœåŠ¡çš„è¡¨è¯»æ•°ã€‚è¯¥åº”ç”¨ç¨‹åºä½¿ç”¨ Node.jsã€TypeScriptã€Prismaã€Express.js ç­‰æŠ€æœ¯æ¥æ„å»ºä¸€ä¸ªå¼ºå¤§ä¸”å¯æ‰©å±•çš„åç«¯ã€‚

![å¼€å‘çŠ¶æ€](https://img.shields.io/badge/status-%E5%BC%80%E5%8F%91%E4%B8%AD-yellow)

## FrontEnd
- ğŸ“ [React Precision Application](https://github.com/SamuelRocha91/precisionReactApplication/blob/main/README_ch.md) 

![ä½¿ç”¨ Docker å¯åŠ¨åç«¯](./src/gifs/apiMeasure.gif)
![åˆ›å»ºå®¢æˆ·çš„ POST è¯·æ±‚](./src/images/postCustomer.png)

## ä½¿ç”¨çš„æŠ€æœ¯

- **Node.js**: æœåŠ¡å™¨ç«¯ JavaScript è¿è¡Œç¯å¢ƒã€‚
- **TypeScript**: JavaScript çš„ç±»å‹è¶…é›†ï¼Œå¢åŠ äº†é™æ€ç±»å‹æ”¯æŒã€‚
- **Express.js**: Node.js çš„ç®€æ´è€Œçµæ´»çš„ Web æ¡†æ¶ã€‚
- **Prisma**: ç®€åŒ–æ•°æ®åº“è®¿é—®çš„ ORM å·¥å…·ã€‚
- **MySQL**: å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ•°æ®åº“ã€‚
- **ESLint**: ç”¨äºä»£ç è´¨é‡å’Œé£æ ¼çš„é™æ€æ£€æŸ¥å·¥å…·ã€‚
- **Jest**: ç”¨äºä»£ç æµ‹è¯•çš„æ¡†æ¶ã€‚
- **Mocha**: å¦å¤–ç”¨äºæµ‹è¯•çš„æ¡†æ¶ã€‚
- **Google Generative AI**: é›†æˆç”¨äºåˆ†æè¡¨è¯»æ•°å›¾ç‰‡å¹¶æå–æ•°å­—è¯»æ•°ã€‚
- **Swagger**: é›†æˆç”¨äºè‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚

## é¡¹ç›®ç»“æ„

é¡¹ç›®ç»„ç»‡é‡‡ç”¨æ¨¡å—åŒ–ç»“æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚ä¸»è¦çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å¦‚ä¸‹ï¼š

- `src/`: åŒ…å«åº”ç”¨ç¨‹åºçš„æºä»£ç ã€‚
  - `controllers/`: å¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨é€»è¾‘ã€‚
  - `db/`: åˆ›å»º Prisma å®ä¾‹ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­è¿æ¥æ•°æ®åº“ã€‚
  - `exceptions/`: è‡ªå®šä¹‰å¼‚å¸¸ç”¨äºé”™è¯¯å¤„ç†ã€‚
  - `interfaces/`: ç”¨äºå‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„æ¥å£å’Œç±»å‹å®šä¹‰ã€‚
  - `middlewares/`: ç”¨äºæ•°æ®éªŒè¯å’Œå¤„ç†çš„ä¸­é—´ä»¶ã€‚
  - `models/`: ä¸æ•°æ®åº“äº¤äº’çš„é€»è¾‘ã€‚
  - `services/`: æœåŠ¡å±‚ï¼Œè´Ÿè´£ä¸ Prisma äº¤äº’å¹¶å®ç°ä¸šåŠ¡é€»è¾‘ã€‚
  - `routes/`: å®šä¹‰ API è·¯ç”±ã€‚
  - `utils/`: å®ç”¨å·¥å…·ï¼Œå¦‚å›¾åƒå¤„ç†å’Œä¸ Google Generative AI API çš„äº¤äº’ã€‚
  - `tests/`: è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç”¨äºæ£€æŸ¥åŠŸèƒ½æ€§ã€‚

## åŠŸèƒ½

- **è¯»æ•°åˆ—è¡¨**: å¯æŸ¥çœ‹æŸä¸ªå®¢æˆ·çš„æ‰€æœ‰è¯»æ•°ï¼Œå¹¶æŒ‰è¯»æ•°ç±»å‹è¿›è¡Œè¿‡æ»¤ã€‚
- **å›¾åƒç®¡ç†**: è¯»æ•°å›¾ç‰‡é€šè¿‡ Base64 æ ¼å¼ä¿å­˜å¹¶é€šè¿‡ä¸´æ—¶ URL è¿›è¡Œè®¿é—®ã€‚
- **å‚æ•°éªŒè¯**: ä¸­é—´ä»¶ç”¨äºéªŒè¯è¾“å…¥æ•°æ®ï¼Œç¡®ä¿è¯·æ±‚çš„æ­£ç¡®æ€§ã€‚
- **ä½¿ç”¨ Google Generative AI è¿›è¡Œå›¾åƒåˆ†æ**: API åˆ†æè¡¨è¯»æ•°å›¾ç‰‡å¹¶æå–å‡ºæ˜¾ç¤ºçš„ç”¨é‡å€¼ã€‚

## å¯åŠ¨é¡¹ç›®

### ç¯å¢ƒè¦æ±‚

- Node.js
- Dockerï¼ˆå¯é€‰ç”¨äºå¼€å‘ï¼‰

### å®‰è£…æ­¥éª¤

1. å…‹éš†ä»“åº“ï¼š
    ```bash
    git clone https://github.com/your-username/apiShopper.git
    cd apiMeasureWaterAndGas
    ```

2. å®‰è£…ä¾èµ–ï¼š
    ```bash
    npm install
    ```

3. é…ç½®ç¯å¢ƒå˜é‡ï¼š
    - åˆ›å»º `.env` æ–‡ä»¶å¹¶å¡«å†™å¿…è¦çš„é…ç½®ä¿¡æ¯ã€‚
    - ç¤ºä¾‹ï¼š
      ```env
      DATABASE_URL="file:./dev.db"
      GEMINI_API_KEY="your_google_api_key"
      HOST="http://localhost:3000"
      ```

4. è¿è¡Œæ•°æ®åº“è¿ç§»ï¼š
    ```bash
    npx prisma migrate dev
    ```

5. å¯åŠ¨æœåŠ¡å™¨ï¼š
    ```bash
    npm run dev
    ```

### ä½¿ç”¨ Docker

ä½ å¯ä»¥ä½¿ç”¨ Docker å¯åŠ¨é¡¹ç›®ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
docker-compose up --build
```

## æµ‹è¯•

æµ‹è¯•ä½¿ç”¨ Jest å’Œ Mocha è¿›è¡Œã€‚è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š

```bash
npm run test
```

## è´¡çŒ®

å¦‚æœæ‚¨æƒ³åšå‡ºè´¡çŒ®ï¼Œå¯ä»¥æ‰“å¼€ issues æˆ–æäº¤ pull requestsã€‚æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼

## å¯ç”¨çš„è„šæœ¬

- `start`: å¯åŠ¨åº”ç”¨ç¨‹åºã€‚
- `dev`: åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯åŠ¨åº”ç”¨ç¨‹åºã€‚
- `build`: å°† TypeScript ç¼–è¯‘ä¸º JavaScriptã€‚
- `lint`: ä½¿ç”¨ ESLint æ£€æŸ¥ä»£ç è´¨é‡ã€‚
- `lint:fix`: è‡ªåŠ¨ä¿®å¤ ESLint æ£€æŸ¥å‘ç°çš„é—®é¢˜ã€‚
- `prisma:generate`: ç”Ÿæˆ Prisma ç±»å‹ã€‚
- `prisma:migrate`: æ‰§è¡Œæ•°æ®åº“è¿ç§»ã€‚
- `prisma:seed`: ä½¿ç”¨æµ‹è¯•æ•°æ®å¡«å……æ•°æ®åº“ã€‚
- `docker`: å®‰è£…ä¾èµ–ï¼Œç”Ÿæˆ Prisma ç±»å‹ï¼Œæ‰§è¡Œè¿ç§»ï¼Œå¹¶ä½¿ç”¨ Nodemon å¯åŠ¨æœåŠ¡å™¨ã€‚
- `test`: ä½¿ç”¨ Mocha å’Œ Jest è¿è¡Œæ‰€æœ‰æµ‹è¯•ã€‚

## å›¾åƒç®¡ç†

ç”¨äºä¿å­˜å’Œç”Ÿæˆå›¾åƒ URL çš„å®ç”¨å·¥å…·ï¼š

- **`saveBase64Image`**: å°† Base64 å›¾åƒä¿å­˜åˆ°æœåŠ¡å™¨ã€‚
- **`getImageUrl`**: ç”Ÿæˆè®¿é—®å›¾åƒçš„ä¸´æ—¶ URLã€‚
- **`extractMimeType`**: ä» Base64 å›¾åƒä¸­æå– MIME ç±»å‹ã€‚
- **`extractSize`**: è®¡ç®— Base64 å›¾åƒçš„å¤§å°ã€‚

## ä½¿ç”¨ Google Generative AI è¿›è¡Œå›¾åƒåˆ†æ

**`checkMeasureValue`** å‡½æ•°ä½¿ç”¨ Google Generative AI åˆ†æè¡¨è¯»æ•°å›¾ç‰‡å¹¶æå–ç”¨é‡å€¼ã€‚

```javascript
async function checkMeasureValue(mime: string, base64: string): Promise<number> {
  const result = await model.generateContent([
    {
      inlineData: {
        mimeType: mime,
        data: base64
      }
    },
    { text: PROMPT }
  ]);

  return Number(result.response.text().match(/\d+/)[0]);
}
```

æ­¤åŠŸèƒ½ç¡®ä¿ä»æä¾›çš„å›¾åƒä¸­å‡†ç¡®æå–è¡¨è¯»æ•°å€¼ã€‚

## å…¶ä»–é¡¹ç›®

- ğŸ’ [Delivery BackEnd](https://github.com/SamuelRocha91/delivery_back) 
- ğŸ›’ [Consumy Application](https://github.com/SamuelRocha91/consumy) 
- ğŸ‘¨â€ğŸ’¼ [Seller Application](https://github.com/SamuelRocha91/seller_application) 
- ğŸ’² [Paymenty API](https://github.com/SamuelRocha91/paymenty) 
